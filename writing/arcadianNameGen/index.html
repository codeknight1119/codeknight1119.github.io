<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arcadian Name Gen</title>
    </style>
</head>

<body>
    <header>
        <h1>Arcadian name generator</h1>
        <h2>v.1</h2>
    </header>

    <select id="gender">
        <option value="male"> Male</option>
        <option value="female"> Female</option>
        <option value="neutral"> Random</option>
    </select>
    <p>Mashup</p> <input type="checkbox" checked id="mashupCheck">
    <p>How many</p> <input type="range" min=1 max=20 id="slider">
    <button onclick="generateName()">Generate</button>
    <p id="output"></p>

    <script>
        function NameGenerator() {
            this.maleNames = ["Tuxie", "Kael", "Draven", "Silas"];
            this.femaleNames = ["Araya", "Lyra", "Selene", "Nova"];

            // rules you can tweak
            this.rules = {
                male: { endings: ["ar", "en", "us", "or", "random"] },
                female: { endings: ["a", "e", "ia", "elle", "random"] },
                neutral: { endings: ["random"] }
            };

            // helper: random letters
            this.randomEnding = function (len = 2) {
                const letters = "abcdefghijklmnopqrstuvwxyz";
                let str = "";
                for (let i = 0; i < len; i++) {
                    str += letters[Math.floor(Math.random() * letters.length)];
                }
                return str;
            };

            // chunk a name into syllable-ish pieces
            this.chunkName = function (name, chunkSize = 2) {
                let chunks = [];
                for (let i = 0; i < name.length; i += chunkSize) {
                    chunks.push(name.slice(i, i + chunkSize));
                }
                return chunks;
            };

            // build pool of chunks
            this.buildChunks = function () {
                let allChunks = [];
                const allNames = this.maleNames.concat(this.femaleNames);
                allNames.forEach(name => {
                    const chunkSize = Math.random() > 0.5 ? 2 : 3;
                    allChunks = allChunks.concat(this.chunkName(name, chunkSize));
                });
                return allChunks;
            };

            // generate name
            this.generate = function (options = {}) {
                const { gender = null, mashup = false } = options;

                if (!mashup) {
                    // pick directly from list
                    if (gender === "male") return this.maleNames[Math.floor(Math.random() * this.maleNames.length)];
                    if (gender === "female") return this.femaleNames[Math.floor(Math.random() * this.femaleNames.length)];
                    return [...this.maleNames, ...this.femaleNames][Math.floor(Math.random() * (this.maleNames.length + this.femaleNames.length))];
                }

                // mashup mode
                const chunks = this.buildChunks();
                const numChunks = Math.floor(Math.random() * 2) + 2; // 2–3 chunks
                let name = "";
                for (let i = 0; i < numChunks; i++) {
                    name += chunks[Math.floor(Math.random() * chunks.length)];
                }

                // apply rules
                let ending = "";
                if (gender && this.rules[gender] && this.rules[gender].endings.length > 0) {
                    let chosen = this.rules[gender].endings[Math.floor(Math.random() * this.rules[gender].endings.length)];
                    if (chosen === "random") {
                        ending = this.randomEnding(Math.floor(Math.random() * 3) + 1); // 1–3 random letters
                    } else {
                        ending = chosen;
                    }
                }

                // clean up
                name = (name.charAt(0).toUpperCase() + name.slice(1).toLowerCase()) + ending;

                return name;
            };
        }

        function generateName() {
            const gen = new NameGenerator();
            const times = document.getElementById('slider').value;
            let currentTimes = 0;

            let outputs = [];

            if (currentTimes !== times) {
                var newGen = gen.generate({ gender: document.getElementById('gender'), mashup: document.getElementById("mashupCheck").value })
                outputs.push(newGen)
                currentTimes++;
            } else {
                document.getElementById('output').textContent = outputs;
            }
        }
        //      console.log("Male normal:", gen.generate({ gender: "male" }));
        //     console.log("Female mashup:", gen.generate({ gender: "female", mashup: true }));
        //     console.log("Neutral random-ending mashup:", gen.generate({ gender: "neutral", mashup: true }));
    </script>
</body>

</html>